# カード効果読み込み最適化アップデート

## 🚀 変更内容

### デッキ選択時の読み込み削除
- デッキ選択時のメタデータ読み込みを完全に削除
- デッキ選択の体感速度が大幅に向上

### 読み込みタイミングの最適化
1. **ページ読み込み時**
   - 基本メタデータ（card_data.json）の一括読み込み
   - 高頻度カードの効果事前読み込み

2. **ゲーム開始時**
   - デッキ固有のカード効果読み込み
   - キャッシュされたデータを使用で高速化

### 高頻度カード事前読み込み
- `common-cards.js`: よく使われるカードを事前定義
- エールカード、汎用サポート、人気推しホロメンを優先読み込み
- デッキ構築時の体感速度向上

### UI読み込み表示
- プログレス付きローディングオーバーレイ
- 読み込み状況のリアルタイム表示
- ユーザビリティの向上

## 📁 変更されたファイル

### 新規作成
- `battle_simulator/card-effects/common-cards.js` - 高頻度カード定義

### 主要変更
- `battle_simulator/card-effects/scalable-card-effect-manager.js` - 読み込み最適化・UI表示追加
- `js/deck_manager.js` - デッキ選択時の読み込み削除
- `battle_simulator/game-setup-manager.js` - ゲーム開始時読み込み最適化
- `battle_simulator.html` - 高頻度カードファイル読み込み追加
- `battle_simulator/docs/ARCHITECTURE.md` - ドキュメント更新

## 🎯 期待される効果

1. **デッキ選択の高速化**: 即座にデッキ選択が完了
2. **初回読み込みの可視化**: ユーザーが読み込み状況を把握可能
3. **ゲーム開始の最適化**: キャッシュ利用で高速化
4. **メモリ使用量の削減**: 必要時のみ効果を読み込み

## 🧪 テスト方法

1. ページを開いて初回読み込み表示を確認
2. デッキ選択の速度を確認（即座に完了するはず）
3. ゲーム開始時の読み込み表示を確認
4. 高頻度カード（エール等）の効果が正常に動作するか確認

## 🔧 今後の拡張ポイント

- 高頻度カードリストの実データに基づく調整
- 読み込み優先度の動的調整
- オフライン対応の強化
- パフォーマンス監視の追加
